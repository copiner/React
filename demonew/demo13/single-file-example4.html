<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>createPortal</title>
  <link rel="stylesheet" href="./app.css">
  <script src="../com/react.development.js"></script>
  <script src="../com/react-dom.development.js"></script>
  <script src="../com/babel.min.js"></script>
</head>
<body>
  <div id="app-root">
    <!-- <div className="app">
      This div has overflow: hidden.
      <button onClick={this.handleShow}>Show modal</button>
    </div>
    <div>
      <div className="modal">
        <div>
          With a portal, we can render content into a different
          part of the DOM.
        </div>
        <button onClick={this.handleHide}>Hide modal</button>
      </div>
    </div> -->
  </div>
  <script type="text/babel">
  const appRoot = document.getElementById('app-root');

  class Modal extends React.Component {
    constructor(props) {
      super(props);
      this.el = document.createElement('div');
    }

    componentDidMount() {
      appRoot.appendChild(this.el);
    }

    componentWillUnmount() {
      appRoot.removeChild(this.el);
    }

    render() {
      return ReactDOM.createPortal(
        this.props.children,
        this.el,
      );
    }
  }

  class App extends React.Component {
    constructor(props) {
      super(props);
      this.state = {showModal: false};

      this.handleShow = this.handleShow.bind(this);
      this.handleHide = this.handleHide.bind(this);
    }

    handleShow() {
      this.setState({showModal: true});
    }

    handleHide() {
      this.setState({showModal: false});
    }

    render() {
      const modal = this.state.showModal ? (
        <Modal>
          <div className="modal">
            <div>
              With a portal, we can render content into a different
              part of the DOM.
            </div>
            <button onClick={this.handleHide}>Hide modal</button>
          </div>
        </Modal>
      ) : null;

      return (
        <div className="app">
          This div has overflow: hidden.
          {modal}
          <button onClick={this.handleShow}>Show modal</button>
        </div>
      );
    }
  }

  ReactDOM.render(<App />, appRoot);
  </script>
</body>
</html>
